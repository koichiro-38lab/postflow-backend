# JWT for tests (HS256, >= 256-bit)
app.jwt.secret=0123456789abcdef0123456789abcdef0123456789abcdef0123456789abcdef
app.jwt.access-ttl=900s
app.jwt.refresh-ttl=604800s

# --- DataSource for tests (use local Postgres container by default) ---
# Prefer explicit env vars if provided; otherwise fall back to localhost:5532
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5532/${POSTGRES_DB:appdb}}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:${POSTGRES_USER:appuser}}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:${POSTGRES_PASSWORD:apppass}}
spring.datasource.driver-class-name=org.postgresql.Driver

# Use Flyway migrations to create schema for tests
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration

# Ensure Hibernate validates against Flyway-created schema (no auto DDL)
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.properties.hibernate.format_sql=true

# Do not replace DataSource with an embedded database in tests
spring.test.database.replace=none
