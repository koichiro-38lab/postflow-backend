# テスト用JWT設定（HS256、256ビット以上）
app.jwt.secret=0123456789abcdef0123456789abcdef0123456789abcdef0123456789abcdef
app.jwt.access-ttl=900s
app.jwt.refresh-ttl=604800s

# --- テスト用データソース設定（デフォルトはローカルPostgresコンテナ） ---
# 環境変数があれば優先、なければlocalhost:5532を利用
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5532/${POSTGRES_DB:appdb}}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:${POSTGRES_USER:appuser}}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:${POSTGRES_PASSWORD:apppass}}
spring.datasource.driver-class-name=org.postgresql.Driver

# S3設定（S3MediaStorageConfig: app.media.*）
app.media.bucket=${S3_BUCKET:media}
app.media.region=${AWS_REGION:ap-northeast-1}
app.media.endpoint=${S3_ENDPOINT:http://minio:9000}
app.media.access-key=${S3_ACCESS_KEY:minioadmin}
app.media.secret-key=${S3_SECRET_KEY:minioadmin}
app.media.public-base-url=${S3_PUBLIC_BASE_URL:http://localhost/download/}
app.media.key-prefix=/media/

# テスト用スキーマ作成にFlywayマイグレーションを使用
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration

# HibernateがFlyway作成スキーマに対してバリデーションのみ行う（自動DDL無効）
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.properties.hibernate.format_sql=true

# テスト時にDataSourceを組み込みDBへ置き換えない
spring.test.database.replace=none
